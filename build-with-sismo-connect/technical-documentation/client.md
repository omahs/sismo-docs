---
description: Request proofs from your user
---

# Sismo Connect Client: Request

The [Sismo Connect](../../discover-sismo-connect/empower-your-app.md) Client is a frontend package built on top of the [Sismo Data Vault](../../what-is-sismo/personal-data-sismos-data-vault-gems-and-groups.md) app (the prover) to easily request Proofs ([Claims](./#claim), [Auths](./#auth)) or [Message Signatures](./#signature) from your users.

## Installation

Install the Sismo Connect Client package in your frontend with `npm` or `yarn`:

```bash
# with npm
npm install @sismo-core/sismo-connect-client
# with yarn
yarn add @sismo-core/sismo-connect-client
```

{% hint style="success" %}
Make sure to have at least v18.15.0 as Node version. You can encounter issues with ethers dependencies if not.
{% endhint %}

## Usage

#### Configuration

The first step for integrating Sismo Connect in your frontend is to create a `SismoConnectConfig`. This config will require an `appId` and can be customized with [optional fields.](client.md#sismoconnectclientconfig) You can go to the [Sismo Factory](../../sismo-factory/create-a-sismo-connect-app.md) to create a Sismo Connect App and get an `appId`.

```typescript
import { SismoConnect, SismoConnectClientConfig } from "@sismo-core/sismo-connect-client";

const config: SismoConnectClientConfig = {
  // you will need to get an appId from the Factory
  appId: "0x8f347ca31790557391cec39b06f02dc2", 
}

// create a new SismoConnect instance with the client configuration
const sismoConnect = SismoConnect(config);
```

#### Request proofs of group membership from your users

Request proofs of group membership from your users by creating a `ClaimRequest` and calling the `request` function of the Sismo Connect Client. Only the `groupId` in the `ClaimRequest` is mandatory.

```typescript
import { ClaimRequest } from "@sismo-core/sismo-connect-client";

// claim 1: request a proof of ENS handle ownership
const claim: ClaimRequest = { 
    // ID of the group the user should be a member of
    // here: ens-domains-holders
    groupId: "0x8b64c959a715c6b10aa8372100071ca7",
};

// The `request` function sends your user to the Sismo Vault App 
// to generate the proof of group membership
// After the proof generation, the user is redirected with it to your app
sismoConnect.request({ claim: claim });
```

You can ask users to **aggregate their data** by proving that they are human AND that they have an ENS. To do this, we can include several claims in our request:

```typescript
// claim 2: request a proof of PoH ownership
const secondClaim: ClaimRequest = { groupId: "0x682544d549b8a461d7fe3e589846bb7b" };

// Request of multiple claims:
sismoConnect.request({ claims: [claim, secondClaim] });
```

#### Request proofs of account ownership from your users

Request proofs of account ownership from your users by creating an `AuthRequest` and calling the `request` function of the Sismo Connect Client. Only the `authType` in the `ClaimRequest` is mandatory.&#x20;

You can request proofs of:

* **Data Vault** ownership (AuthType.**VAULT**)
* **EVM account** ownership (AuthType.**EVM\_ACCOUNT**)
* **Github account** ownership (AuthType.**GITHUB**)
* **Twitter account** ownership (AuthType.**TWITTER**)

<pre class="language-typescript"><code class="lang-typescript">import { AuthType, AuthRequest } from "@sismo-core/sismo-connect-client";

<strong>const auth: AuthRequest = { 
</strong><strong>    // user should prove that they own a EVM account
</strong>    authType: AuthType.EVM_ACCOUNT,
};
// The `request` function sends your user to the Sismo Vault App 
// to generate the proof of account ownership
// After the proof generation, the user is redirected with it to your app
sismoConnect.request({ auth: auth });

// Here again you can request users to have an EVM AND a Twitter twitter account
// By making a request of multiple Auths:
const secondAuth: AuthRequest = { authType: AuthType.TWITTER };
sismoConnect.request({ auths: [auth, secondAuth] });
</code></pre>

#### Request a message signature from your users

Request to embed a message in your users proof by creating a `SignatureRequest` and calling the `request` function of the Sismo Connect client. When you create a `SignatureRequest`, users will embed this message in their proofs, it is then possible to verify if this message is present in the proof provided to you when verifying in your smart contract or server.

<pre class="language-typescript"><code class="lang-typescript">import { SignatureRequest } from "@sismo-core/sismo-connect-client";

const SIGNATURE: SignatureRequest = { 
    message: "Your message here"
};

<strong>sismoConnect.request({ signature: SIGNATURE });
</strong></code></pre>

#### Get proofs from your users

Receive proofs in a `sismoConnectResponse` by calling the `getResponse` function when the user is redirected back to your application.

```typescript
// The `getResponse` function returns the proof generated by your user 
// after coming back from the Sismo Vault App.
const sismoConnectResponse = sismoConnect.getResponse();
```

If you want a response usable on-chain you can use the getResponseBytes function.

```typescript
const sismoConnectResponseBytes = sismoConnect.getResponseBytes();
```

## Documentation

#### `SismoConnectClientConfig`

The `SismoConnectClientConfig` allows you to fully customize your Sismo Connect integration. Its only mandatory field is the `appId`. For more liberty when prototyping, it also comes with an optional `devMode` field that allows developers to add their addresses and compute cryptographically valid proofs when redirected to the Sismo Developer Vault.

```typescript
export type SismoConnectClientConfig = {
  // the appId registered in the Factory
  appId: string,
  devMode?: {
    // will use the Dev Sismo Data Vault https://dev.vault-beta.sismo.io/
    enabled?: boolean, 
    // Display a modal at the end of the flow with the response to help you 
    // generate response for development purpose
    displayRawResponse?: boolean;
    // Override all groups 
    devGroups?: {
      groupId?: string;
      groupTimestamp?: number | "latest";
      data?: Record<string, Number | BigNumberish>
    }[]
  },
  // url of the Sismo Vault App to redirect to
  vaultAppBaseUrl?: string
  // url of the Sismo API used
  sismoApiUrl?: string
}
```

Here is an example of a customized `SismoConnectClientConfig` with a `devMode` enabled and two developer addresses that will be able to generate valid proofs from their developer [Data Vaults](../../what-is-sismo/personal-data-sismos-data-vault-gems-and-groups.md).

```typescript
const sismoConnectConfig: sismoConnectClientConfig = {
    // you will need to register an appId in the Factory
    appId: "0x8f347ca31790557391cec39b06f02dc2", 
    // allows to create valid proofs for specific addresses
    // should only be used when prototyping
    // default: undefined
    devMode: {
        // will use the Dev Sismo Data Vault https://dev.vault-beta.sismo.io/
        enabled: true, 
        // overrides a group with these addresses
        devGroups: [{
            groupId: "0x42c768bb8ae79e4c5c05d3b51a4ec74a",
            data: {
                "0x123...abc": 1, 
                "0x456...efa": 2
            },
        }]
    },
    // url of the Sismo Vault App to redirect to
    // default: https://vault-beta.sismo.io
    // automatically move to https://dev.vault-beta.sismo.io when devMode.enabled = true
    vaultAppBaseUrl: "https://dev.vault-beta.sismo.io", 
    // url of the Sismo API used
    // default: https://api.sismo.io
    sismoApiUrl: "https://api.sismo.io"
}
```

#### `ClaimRequest`

The ClaimRequest object holds all the information needed to generate proof of group membership.

<pre class="language-typescript"><code class="lang-typescript">export type ClaimRequest = {
    // The groupId from which the proofs are generated
    groupId?: string;
    // The timestamp of the group from which the proofs are generated
    groupTimestamp?: number | "latest"; // default to "latest"
    // The value used in the statement request
    value?: number; // default to 1
    // comparator use for the requested value
    // can be "GTE" or "EQ"
    claimType?: ClaimType; // default to GTE
    // Make the claim optional
    isOptional?: boolean; // default to false
    // Make the value the user wants to use to prove membership selectable
    isSelectableByUser?: boolean; // default to true
    extraData?: any; // default to ''
}

<strong>export enum ClaimType {
</strong>  EMPTY,
  GTE,
  GT,
}
</code></pre>

Here is an example of a customized `ClaimRequest` that, [when requested](client.md#request), will generate a proof for the latest data of the groupId `0x42c768bb8ae79e4c5c05d3b51a4ec74a` . The user should have exactly a value of 2 in this group.

```typescript
import { ClaimRequest } from "@sismo-core/sismo-connect-client";

const CLAIM: ClaimRequest = { 
    // ID of the group the user should be a member of
    groupId: "0x42c768bb8ae79e4c5c05d3b51a4ec74a",
    // timestamp of the data used for the group
    // default: latest
    groupTimestamp: "latest",
    // value the user should have in the group
    // default: 1
    value: 2, 
    // comparator for the requested value
    // default: "GTE" -> "greater than or equal"
    claimType: ClaimType.EQ,
    isOptional: false;
    isSelectableByUser: true;
};
sismoConnect.request({ claim: CLAIM });
```

{% hint style="info" %}
More info on groups and values [here](../../knowledge-base/resources/technical-concepts/data-groups.md#verifiable-claims-and-data-groups)
{% endhint %}

#### `AuthRequest`

The AuthRequest object holds all the information needed to generate proof of account ownership.

```typescript
export type AuthRequest = {
  // twitter// github// evmAccount
  authType: AuthType;
  userId?: string; // Request a specific user
  // Make the claim optional
  isOptional?: boolean; // default to false
  // Make the account whose ownership the user wants to prove selectable
  isSelectableByUser?: boolean; // default to true
  // (soon™) Do not reveal the userId with which the user performs the auth
  isAnon?: boolean; // false
  extraData?: any; // default to ''
}

export enum AuthType {
  EMPTY,
  ANON,
  GITHUB,
  TWITTER,
  EVM_ACCOUNT,
}
```

Here is an example of a customized `AuthRequest` that, [when requested](client.md#request), will generate a proof containing a Github Id. The user should have a GitHub in his vault.

```typescript
import { AuthRequest } from "@sismo-core/sismo-connect-client";

const AUTH: AuthRequest = { 
    authType: AuthType.GITHUB,
};
sismoConnect.request({ auth: AUTH });
```

#### `SignatureMessageRequest`

The `SignatureMessageRequest` contains the message that the user should sign.

```typescript
import { SignatureRequest } from "@sismo-core/sismo-connect-client";

const SIGNATURE: SignatureRequest = { 
    message: "Your message here"
};

sismoConnect.request({ signature: SIGNATURE });
```

#### `request()`

```typescript
function request({ 
    claims, 
    auths, 
    // OR
    claim,
    auth,
    
    signature, 
    namespace, 
    callbackUrl,
    callbackPath, // deprecated
}: RequestParams): void
```

The `request` function redirects your user to the Sismo Vault App to generate the proof.

```typescript
export type RequestParams = {
  claims?: ClaimRequest[];
  auths?: AuthRequest[];
  // If you have only one claim or one auth
  claim?: ClaimRequest;
  auth?: AuthRequest;
  
  signature?: SignatureRequest;
  namespace?: string;
  // the url to redirect your users with proofs
  // default: empty
  // example: /custom-callback-url
  callbackUrl?: string;
  callbackPath?: string; // deprecated
};
```

**Here is an example of a customized usage of the request function:**

You want to create an NFT Airdrop for specific users.

So you want the users to prove that they are **Sismo Contributors with a level 2**. But in order to make your airdrop more Sybil resistant you will require them to also have a **Gitcoin Passport** and a **Twitter account**.&#x20;

This proof should be made for the service named **"sismo-edition"** and when generated you want them to be redirected to the claim page of your website at the path **"https://my-nft-drop.xyz/sismo-edition/claim-nft"**.

You will then use this proof to drop an NFT to these users.

```typescript
import { 
  AuthRequest, 
  AuthType, 
  ClaimRequest, 
  ClaimType,
  SismoConnect
} from "@sismo-core/sismo-connect-client";

const sismoConnect = SismoConnect({
  appId: '0x8f347ca31790557391cec39b06f02dc2',
})

const sismoContributorClaim: ClaimRequest = { 
    groupId: "0xe9ed316946d3d98dfcd829a53ec9822e",
    value: 2, 
    claimType: ClaimType.GTE,
};

const gitcoinPassportClaim: ClaimRequest = { 
    groupId: "0x1cde61966decb8600dfd0749bd371f12",
};

const twitterAuth: AuthRequest = { 
    authType: AuthType.TWITTER,
};

sismoConnect.request({
    claims: [sismoContributorClaim, gitcoinPassportClaim],
    auth: twitterAuth,
    namespace: "sismo-edition",
    callbackUrl: "https://my-nft-drop.xyz/sismo-edition/claim-nft"
})
```

{% hint style="info" %}
Namespace is highly interesting when you want your users to generate proofs for each service in an app. You can see more information about how to use it in the [Sismo Connect Server package documentation](server.md).
{% endhint %}

#### `getResponse()`

```typescript
function getResponse(): SismoConnectResponse | null
```

The `getResponse` function returns the [`SismoConnectResponse`](client.md#sismoconnectresponse) object containing the `verifiableStatements` with proofs generated by your user after coming back from Sismo Vault App. Proofs must be sent to your backend and verified thanks to the [`@sismo-core/sismo-connect-server`](https://github.com/sismo-core/sismo-connect-packages/tree/main/packages/sismo-connect-server) package.

#### `getResponseBytes()`

```typescript
function getResponseBytes(): string | null
```

The `getResponseBytes` function returns the response encoded in bytes usable by the [`@sismo-core/sismo-connect-solidity`](https://github.com/sismo-core/sismo-connect-packages/tree/main/packages/sismo-connect-solidity) Librairy.

#### `SismoConnectResponse`

```typescript
type SismoConnectResponse = {
    // the appId registered in the Factory
    appId: string;
    // Sismo Connect version
    version: string;
    // service from which the proof is requested
    namespace?: string;
    signedMessage?: string;
    proofs: SismoConnectProof[]
}

type SismoConnectProof = {
    auths?: Auth[];
    claims?: Claim[];
    provingScheme: string;
    proofData: string;
    extraData: any;
}
```
